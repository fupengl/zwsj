
@using DataAccess
@using Service
@using Service.DTOs
@using ZhiDiExt.Controllers
@using ZhiDiExt.Models
@model DataAccess.ZhuZhaiPingGu
@{
    var X = Html.X();
}

@{
    var storeZhuZhaiJiChuXinXiLookup_WuYeBianHao_F = X.StoreFor<WuYeDto>()
           .ID("storeZhuZhaiJiChuXinXiLookup_WuYeBianHao_F")
           .AutoLoad(false)
                   .Parameters(ps =>
                   {
                       ps.Add(X.StoreParameter().Name("wuYeYongTu").Value("住宅").Mode(ParameterMode.Value));
                   }
                   )
           .Proxy(p => p
               .Add(X.AjaxProxy()
               .Url(Url.Action("AutoComplete", "WuYeMingChengChaXun"))
                   .Reader(r => r.Add(X.JsonReader().Root("data")))))
           ;


    var formPanel = X.FormPanel()
        .ID("FormPanelZhuZhaiPingGu")
        .Frame(true)
        .DefaultAnchor("100%")
        .BodyPadding(6)
        .FieldDefaults(def =>
        {
            def.MsgTarget = MessageTarget.Side;
        })
        .Items(
//            X.FieldContainer()
//                .Layout(LayoutType.HBox)
//                .Margins("0 5 0 5")
//                .Items(i =>
//                {
//                    i.Add(X.TextFieldFor(m => m.WuYeBianHao).ID("WuYeBianHao").FieldLabel("物业编号").AllowBlank(true).MaxLength(20).Hidden(false));
//                    i.Add(X.TextFieldFor(m => m.WuYeMingCheng).ID("WuYeMingCheng").FieldLabel("物业名称").AllowBlank(true).MaxLength(100).Hidden(false).Margins("0 0 0 50"));
//                }),            
            X.HiddenFor(m => m.Id).ID("Id").FieldLabel("Id"),
            X.DateFieldFor(m => m.PingGuShiJian).ID("PingGuShiJian").FieldLabel("评估时间 ").AllowBlank(false).Format("yyyy/MM/dd").Hidden(false).ReadOnly(false),
           X.ComboBoxFor(m => m.WuYeBianHao)
                .ID("WuYeBianHao")
                .FieldLabel("物业编号")
                .AllowBlank(false)
                .EmptyText("请选择")
                .ValueField("WuYeBianHao")
                .DisplayField("WuYeBianHao")
                .Editable(true)
                .TypeAhead(true)
                .MinChars(1)
                .TriggerAction(TriggerAction.Query)
                .QueryMode(DataLoadMode.Remote)
                .Store(storeZhuZhaiJiChuXinXiLookup_WuYeBianHao_F)
                .ListConfig(Html.X().BoundList()
                    .LoadingText("正在查找...")
                    .ItemTpl(Html.X().XTemplate()
                        .Html(@<text>
                            <div class="search-item">
							    <h3><span>{WuYeMingCheng}</span>{WuYeBianHao}</h3>
						    </div>
                        </text>)
                    )
                )
                .Hidden(false)
                .DirectEvents(de =>
                {
                    de.Select.Url = Url.Action("UpdateWuYeMingCheng");
                    de.Select.EventMask.ShowMask = true;
                    de.Select.ExtraParams.Add(X.Parameter().Name("wuYeBianHao").Value("this.getValue()").Mode(ParameterMode.Raw));
                }),
            X.TextFieldFor(m => m.WuYeMingCheng).ID("WuYeMingCheng").FieldLabel("物业名称").AllowBlank(false).MaxLength(100).Hidden(false).ReadOnly(false),
            X.TextFieldFor(m => m.LouDong).ID("LouDong").FieldLabel("楼栋").AllowBlank(false).MaxLength(20).Hidden(false).ReadOnly(false),
            X.TextFieldFor(m => m.LouCeng).ID("LouCeng").FieldLabel("楼层").AllowBlank(false).MaxLength(20).Hidden(false).ReadOnly(false),
            X.TextFieldFor(m => m.FangHao).ID("FangHao").FieldLabel("房号").AllowBlank(false).MaxLength(20).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.JiZhunJia).ID("JiZhunJia").FieldLabel("基准价").AllowBlank(false).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.JianZhuMianJi).ID("JianZhuMianJi").FieldLabel("建筑面积").AllowBlank(false).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.GeLouMianJi).ID("GeLouMianJi").FieldLabel("阁楼面积").AllowBlank(true).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.DiXiaShiMianJi).ID("DiXiaShiMianJi").FieldLabel("地下室面积").AllowBlank(true).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.QiCheKu).ID("QiCheKu").FieldLabel("汽车库").AllowBlank(true).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.QiCheWei).ID("QiCheWei").FieldLabel("汽车位").AllowBlank(true).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.ZiXingCheKu).ID("ZiXingCheKu").FieldLabel("自行车库").AllowBlank(true).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.ZiXingCheWei).ID("ZiXingCheWei").FieldLabel("自行车位").AllowBlank(true).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.JianZhuMianJiJinE).ID("JianZhuMianJiJinE").FieldLabel("建筑面积金额").AllowBlank(true).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.GeLouMianJiJinE).ID("GeLouMianJiJinE").FieldLabel("阁楼面积金额").AllowBlank(true).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.DiXiaShiMianJiJinE).ID("DiXiaShiMianJiJinE").FieldLabel("地下室面积金额").AllowBlank(true).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.QiCheKuJinE).ID("QiCheKuJinE").FieldLabel("汽车库金额").AllowBlank(true).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.QiCheWeiJinE).ID("QiCheWeiJinE").FieldLabel("汽车位金额").AllowBlank(true).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.ZiXingCheKuJinE).ID("ZiXingCheKuJinE").FieldLabel("自行车库金额").AllowBlank(true).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.NumberFieldFor(m => m.ZiXingCheWeiJinE).ID("ZiXingCheWeiJinE").FieldLabel("自行车位金额").AllowBlank(true).AllowDecimals(true).DecimalPrecision(4).MinValue(0).MaxValue(999999999).Hidden(false).ReadOnly(false),
            X.CheckboxFor(m => m.Man5Nian).ID("Man5Nian").FieldLabel("满5年?").Hidden(false).ReadOnly(false).Checked(true),
            X.TextFieldFor(m => m.OrgNamePath).ID("OrgNamePath").FieldLabel("OrgNamePath").AllowBlank(true).MaxLength(1024).Hidden(true).ReadOnly(false),
            X.TextFieldFor(m => m.AreaPath).ID("AreaPath").FieldLabel("AreaPath").AllowBlank(true).MaxLength(1024).Hidden(true).ReadOnly(false),
            X.TextFieldFor(m => m.CreatedBy).ID("CreatedBy").FieldLabel("CreatedBy").AllowBlank(true).MaxLength(50).Hidden(true).ReadOnly(false),
            X.DateFieldFor(m => m.CreatedDate).ID("CreatedDate").FieldLabel("CreatedDate").AllowBlank(true).Format("yyyy/MM/dd").Hidden(true).ReadOnly(false),
            X.TextFieldFor(m => m.LastModifiedBy).ID("LastModifiedBy").FieldLabel("LastModifiedBy").AllowBlank(true).MaxLength(50).Hidden(true).ReadOnly(false),
            X.DateFieldFor(m => m.LastModifiedDate).ID("LastModifiedDate").FieldLabel("LastModifiedDate").AllowBlank(true).Format("yyyy/MM/dd").Hidden(true).ReadOnly(false)
        )

        .TopBar(X.Toolbar()
            .ID("formToolbarZhuZhaiPingGu")
            .Items(
                X.Button()
                    .ID("btnSave")
                    .Text("保存")
                    .Icon(Icon.TableSave)
                    .DirectEvents(
                        de =>
                        {
                            de.Click.Before = "return formValidation(App.FormPanelZhuZhaiPingGu)";
                            de.Click.Url = Url.Action("Insert", "ZhuZhaiPingGu");
                            de.Click.EventMask.ShowMask = true;
                            de.Click.FormID = "FormPanelZhuZhaiPingGu";
                        }),
                X.Button()
                    .ID("btnCancel")
                    .Text("取消")
                    .Icon(Icon.Cancel)
                    .Listeners(l => l.Click.Handler = "#{windowZhuZhaiPingGu}.hide()")
            )
        );
}
@(X.Window()
.ID("windowZhuZhaiPingGu")
      .Width(600)
      .Title("ZhuZhaiPingGu")
      .Resizable(false)
      .Icon(Icon.ApplicationForm)
      .CloseAction(CloseAction.Destroy)
      .Items().Add(formPanel))
);