  
@using DataAccess
@model Service.DTOs.ToolbarPermissionDto
@{
    ViewBag.Title = "ZhuZhaiTaoFangZongHeXinXi";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var X = Html.X();
}

@{

    var ZhuZhaiTaoFangZongHeXinXiModel = X.Model()
        .ID("ZhuZhaiTaoFangZongHeXinXiModel")
        .Fields(f => {
            f.Add(X.ModelField().Name("Id"));
            f.Add(X.ModelField().Name("DanYuanBianHao"));
            f.Add(X.ModelField().Name("LouPanBianHao"));
            f.Add(X.ModelField().Name("LouPanMingCheng"));
            f.Add(X.ModelField().Name("LouDongBianHao"));
            f.Add(X.ModelField().Name("LouDongMingCheng"));
            f.Add(X.ModelField().Name("DanYuanFangHao"));
            f.Add(X.ModelField().Name("DanYuanFangHao"));
            f.Add(X.ModelField().Name("SuoZaiLouCeng").Type(ModelFieldType.Int));
            f.Add(X.ModelField().Name("YongTu"));
            f.Add(X.ModelField().Name("DanCengHuShu").Type(ModelFieldType.Int));
            f.Add(X.ModelField().Name("JianZhuMianJi").Type(ModelFieldType.Float));
            f.Add(X.ModelField().Name("CengGao").Type(ModelFieldType.Float));
            f.Add(X.ModelField().Name("JingGuan"));
            f.Add(X.ModelField().Name("ChaoXiang"));
            f.Add(X.ModelField().Name("CaiGuang"));
            f.Add(X.ModelField().Name("TongFeng"));
            f.Add(X.ModelField().Name("ZhuangXiuZhuangKuang"));
            f.Add(X.ModelField().Name("GeLou"));
            f.Add(X.ModelField().Name("LuTai"));
            f.Add(X.ModelField().Name("TianJing"));
            f.Add(X.ModelField().Name("DiXiaShi"));
            f.Add(X.ModelField().Name("HuaYuan"));
            f.Add(X.ModelField().Name("QuanLiZhuangKuang"));
            f.Add(X.ModelField().Name("TaoXiuZhengZongXiShu").Type(ModelFieldType.Float));
            f.Add(X.ModelField().Name("OrgNamePath"));
            //f.Add(X.ModelField().Name("AreaPath"));
            f.Add(X.ModelField().Name("CreatedBy"));
            f.Add(X.ModelField().Name("CreatedDate").Type(ModelFieldType.Date));
            f.Add(X.ModelField().Name("LastModifiedBy"));
            f.Add(X.ModelField().Name("LastModifiedDate").Type(ModelFieldType.Date));
            f.Add(X.ModelField().Name("Status"));
            f.Add(X.ModelField().Name("ApprovedRemark"));

        });

    var storeZhuZhaiTaoFangZongHeXinXi = X.Store()
        .ID("storeZhuZhaiTaoFangZongHeXinXi")
        .AutoLoad(false)
        .RemoteFilter(true)
        .RemotePaging(true)
        .RemoteSort(true)
        .Model(ZhuZhaiTaoFangZongHeXinXiModel)
        .Proxy(p => p
            .Add(X.AjaxProxy()
                .Url(Url.Action("GetAll", "ZhuZhaiTaoFangZongHeXinXi"))
                .Reader(r => r.Add(X.JsonReader().Root("data")))
            )
        );

    var grid = X.GridPanel()
        .ID("gridZhuZhaiTaoFangZongHeXinXi")
        .Region(Region.Center)
        .Store(storeZhuZhaiTaoFangZongHeXinXi)
        .SelectionModel(
            X.CheckboxSelectionModel()
                .Mode(SelectionMode.Multi)
        )
        .ColumnModel(
            X.RowNumbererColumn().Width(30).Sortable(false),
            X.Column().Text("Id").DataIndex("Id").Hidden(true),
            X.Column().Text("楼盘编号").DataIndex("LouPanBianHao").Width(80).Hidden(false),
            X.Column().Text("楼盘名称").DataIndex("LouPanMingCheng").Width(80).Hidden(false),
            X.Column().Text("楼幢编号").DataIndex("LouDongBianHao").Width(80).Hidden(false),
            X.Column().Text("楼幢名称").DataIndex("LouDongMingCheng").Width(80).Hidden(false),
            X.Column().Text("单元编号").DataIndex("DanYuanBianHao").Width(80).Hidden(false),
            X.Column().Text("单元房号").DataIndex("DanYuanFangHao").Width(80).Hidden(false),
            X.Column().Text("户型").DataIndex("HuXing").Width(80).Hidden(false),
            X.NumberColumn().Text("所在楼层").DataIndex("SuoZaiLouCeng").Width(80).Hidden(false),
            X.Column().Text("用途").DataIndex("YongTu").Width(80).Hidden(false),
            X.NumberColumn().Text("单层户数").DataIndex("DanCengHuShu").Width(80).Hidden(false),
            X.NumberColumn().Text("建筑面积").DataIndex("JianZhuMianJi").Width(80).Hidden(false),
            X.NumberColumn().Text("层高").DataIndex("CengGao").Width(80).Hidden(false),
            X.Column().Text("景观").DataIndex("JingGuan").Width(80).Hidden(false),
            X.Column().Text("朝向").DataIndex("ChaoXiang").Width(80).Hidden(false),
            X.Column().Text("采光").DataIndex("CaiGuang").Width(80).Hidden(false),
            X.Column().Text("通风").DataIndex("TongFeng").Width(80).Hidden(false),
            X.Column().Text("装修状况").DataIndex("ZhuangXiuZhuangKuang").Width(80).Hidden(false),
            X.Column().Text("阁楼").DataIndex("GeLou").Width(80).Hidden(false),
            X.Column().Text("露台").DataIndex("LuTai").Width(80).Hidden(false),
            X.Column().Text("天井").DataIndex("TianJing").Width(80).Hidden(false),
            X.Column().Text("地下室").DataIndex("DiXiaShi").Width(80).Hidden(false),
            X.Column().Text("花园").DataIndex("HuaYuan").Width(80).Hidden(false),
            X.Column().Text("权利状况").DataIndex("QuanLiZhuangKuang").Width(80).Hidden(false),
            X.Column().Text("套修正总系数").DataIndex("TaoXiuZhengZongXiShu").Width(80).Hidden(false),
            X.Column().Text("状态").DataIndex("Status").Width(80).Hidden(true),
            X.Column().Text("审批备注").DataIndex("ApprovedRemark").Width(80).Hidden(true),
            X.Column().Text("OrgNamePath").DataIndex("OrgNamePath").Width(80).Hidden(true),
            //X.Column().Text("AreaPath").DataIndex("AreaPath").Width(80).Hidden(true),
            X.Column().Text("CreatedBy").DataIndex("CreatedBy").Width(80).Hidden(true),
            X.DateColumn().Text("CreatedDate").DataIndex("CreatedDate").Format("yyyy/MM/dd").Width(80).Hidden(true),
            X.Column().Text("LastModifiedBy").DataIndex("LastModifiedBy").Width(80).Hidden(true),
            X.DateColumn().Text("LastModifiedDate").DataIndex("LastModifiedDate").Format("yyyy/MM/dd").Width(80).Hidden(true)
         )
                 
        .Listeners(l => l.BeforeRender.Handler = " App.storeZhuZhaiTaoFangZongHeXinXi.load();  ")
        .Features(
            Html.X().GridFilters()
                .MenuFilterText("过滤")
                .Local(false)
                .Filters(
                    X.NumericFilter().DataIndex("Id"),
                    X.StringFilter().DataIndex("DanYuanBianHao"),
                    X.StringFilter().DataIndex("LouPanBianHao"),
                    X.StringFilter().DataIndex("LouPanMingCheng"),
                    X.StringFilter().DataIndex("LouDongBianHao"),
                    X.StringFilter().DataIndex("LouDongMingCheng"),
                    X.StringFilter().DataIndex("DanYuanFangHao"),
                    X.StringFilter().DataIndex("HuXing"),
                    X.NumericFilter().DataIndex("SuoZaiLouCeng"),
                    X.StringFilter().DataIndex("YongTu"),
                    X.NumericFilter().DataIndex("DanCengHuShu"),
                    X.NumericFilter().DataIndex("JianZhuMianJi"),
                    X.NumericFilter().DataIndex("CengGao"),
                    X.StringFilter().DataIndex("JingGuan"),
                    X.StringFilter().DataIndex("ChaoXiang"),
                    X.StringFilter().DataIndex("CaiGuang"),
                    X.StringFilter().DataIndex("TongFeng"),
                    X.StringFilter().DataIndex("ZhuangXiuZhuangKuang"),
                    X.StringFilter().DataIndex("GeLou"),
                    X.StringFilter().DataIndex("LuTai"),
                    X.StringFilter().DataIndex("TianJing"),
                    X.StringFilter().DataIndex("DiXiaShi"),
                    X.StringFilter().DataIndex("HuaYuan"),
                    X.StringFilter().DataIndex("QuanLiZhuangKuang"),
                    X.StringFilter().DataIndex("TaoXiuZhengZongXiShu"),
                    X.StringFilter().DataIndex("OrgNamePath"),
                    //X.StringFilter().DataIndex("AreaPath"),
                    X.StringFilter().DataIndex("CreatedBy"),
                    X.DateFilter().DataIndex("CreatedDate"),
                    X.StringFilter().DataIndex("LastModifiedBy"),
                    X.DateFilter().DataIndex("LastModifiedDate"),
                    X.StringFilter().DataIndex("Status"),
                    X.StringFilter().DataIndex("ApprovedRemark")
                )
        )
        .TopBar(t => t
            .Add(X
                .Toolbar()
                .ID("toolbarZhuZhaiTaoFangZongHeXinXi")
                .Items(ti =>
                {
                    ti.Add(X.Button()
                        .ID("btnAdd")
                        .Disabled(@Model.DisableAdd)
                        .Text("新增")
                        .Icon(Icon.ApplicationAdd)
                        .DirectEvents(
                            de =>
                            {
                                de.Click.Url = Url.Action("Create", "ZhuZhaiTaoFangZongHeXinXi");
                                de.Click.EventMask.ShowMask = true;
                            }));
                    ti.Add(X.Button()
                        .ID("btnEdit")
                        .Disabled(@Model.DisableEdit)
                        .Text("修改")
                        .Icon(Icon.ApplicationFormEdit)
                        .DirectEvents(
                            de =>
                            {
                                de.Click.Before = "return beforeEditMultiCheck(App.gridZhuZhaiTaoFangZongHeXinXi);";
                                de.Click.Url = Url.Action("Edit", "ZhuZhaiTaoFangZongHeXinXi");
                                de.Click.EventMask.ShowMask = true;
                                de.Click.ExtraParams.Add(new Parameter()
                                {
                                    Name = "id",
                                    Value = "getSelectedRowId(App.gridZhuZhaiTaoFangZongHeXinXi)",
                                    Mode = ParameterMode.Raw
                                });
                            }));
                    ti.Add(X.Button()
                        .ID("btnDelete")
                        .Disabled(@Model.DisableDelete)
                        .Text("删除")
                        .Icon(Icon.ApplicationDelete)
                        .Listeners(l => l.Click.Handler = "deleteRows(App.gridZhuZhaiTaoFangZongHeXinXi,'ZhuZhaiTaoFangZongHeXinXi','Delete')")
                        );
                    ti.Add(X.Button()
                        .ID("btnDeleteAll")
                        .Disabled(@Model.DisableDelete)
                        .Text("删除全部")
                        .Icon(Icon.Delete)
                        .Listeners(l => l.Click.Handler = "deleteAllRows(App.gridZhuZhaiTaoFangZongHeXinXi,'ZhuZhaiTaoFangZongHeXinXi','DeleteAll')")
                        );
                    ti.Add(X.Button()
                        .ID("btnRefresh")
                        .Disabled(@Model.DisableRefresh)
                        .Text("刷新")
                        .Icon(Icon.TableRefresh)
                        .DirectEvents(
                            de =>
                            {
                                de.Click.Url = Url.Action("Refresh", "ZhuZhaiTaoFangZongHeXinXi");
                                de.Click.EventMask.ShowMask = true;
                            }));
                    ti.Add(X.ToolbarSeparator());
                    ti.Add(X.Button()
                        .ID("btnApprove")
                        .Disabled(@Model.DisableApprove)
                        .Text("审核")
                        .Icon(Icon.Accept)
                        .DirectEvents(
                            de =>
                            {
                                de.Click.Before = "return canApprove(App.gridZhuZhaiTaoFangZongHeXinXi);";
                                de.Click.Url = Url.Action("Approve");
                                de.Click.EventMask.ShowMask = true;
                                de.Click.ExtraParams.Add(X.Parameter().Name("id").Value("getSelectedRowId(App.gridZhuZhaiTaoFangZongHeXinXi)").Mode(ParameterMode.Raw));
                                de.Click.ExtraParams.Add(X.Parameter().Name("docType").Value(typeof(ZhuZhaiTaoFangZongHeXinXi).Name));
                                de.Click.ExtraParams.Add(X.Parameter().Name("status").Value("getFieldValue(App.gridZhuZhaiTaoFangZongHeXinXi,'Status')").Mode(ParameterMode.Raw));
                            }));                                  
                    ti.Add(X.ToolbarSeparator());
                    ti.Add(X.Button()
                        .ID("btnUpload")
                        .Disabled(@Model.DisableUpload)
                        .Text("上传")
                        .Icon(Icon.DiskUpload)
                        .DirectEvents(
                            de =>
                            {
                                de.Click.Url = Url.Action("ExcelUpload", "FileUpload");
                                de.Click.EventMask.ShowMask = true;
                                de.Click.ExtraParams.Add(X.Parameter().Name("importDataType").Value("ZhuZhaiTaoFangZongHeXinXi").Mode(ParameterMode.Value));
                            }));
                    ti.Add(X.Button()
                        .ID("btnExport")
                        .Disabled(@Model.DisableExport)
                        .Text("导出")
                        .Icon(Icon.PageExcel)
                        .DirectEvents(
                            de =>
                            {
                                de.Click.Url = Url.Action("ExportToExcel", "ZhuZhaiTaoFangZongHeXinXi");
                                de.Click.IsUpload = true;
                                de.Click.ExtraParams.Add(X.Parameter().Name("filters").Value("getFilters(#{gridZhuZhaiTaoFangZongHeXinXi})").Mode(ParameterMode.Raw));
                                de.Click.ExtraParams.Add(X.Parameter().Name("sorters").Value("getSorters(#{gridZhuZhaiTaoFangZongHeXinXi})").Mode(ParameterMode.Raw));
                                de.Click.ExtraParams.Add(X.Parameter().Name("columns").Value("getVisibleColumns(#{gridZhuZhaiTaoFangZongHeXinXi})").Mode(ParameterMode.Raw));
                            })
                            );                      
                })
            ))
        .BottomBar(b => b
            .Add(X.PagingToolbar()
                .Items(Html.X().Button()
                    .Text("清除过滤条件")
                    .Handler("clearFilters(App.gridZhuZhaiTaoFangZongHeXinXi);"))));
}
@(
 X.Viewport()
      .ID("content")
      .Layout(LayoutType.Border)
      .Items(grid)
      )